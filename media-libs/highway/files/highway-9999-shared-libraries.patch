diff --git a/CMakeLists.txt b/CMakeLists.txt
index 110d159..8a6f52a 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -191,17 +191,18 @@ else()
 
 endif()  # !MSVC
 
-add_library(hwy STATIC ${HWY_SOURCES})
+add_library(hwy SHARED ${HWY_SOURCES})
 target_compile_options(hwy PRIVATE ${HWY_FLAGS})
 set_property(TARGET hwy PROPERTY POSITION_INDEPENDENT_CODE ON)
 target_include_directories(hwy PUBLIC ${CMAKE_CURRENT_LIST_DIR})
 target_compile_features(hwy PUBLIC cxx_std_11)
 
-add_library(hwy_contrib STATIC ${HWY_CONTRIB_SOURCES})
+add_library(hwy_contrib SHARED ${HWY_CONTRIB_SOURCES})
 target_compile_options(hwy_contrib PRIVATE ${HWY_FLAGS})
 set_property(TARGET hwy_contrib PROPERTY POSITION_INDEPENDENT_CODE ON)
 target_include_directories(hwy_contrib PUBLIC ${CMAKE_CURRENT_LIST_DIR})
 target_compile_features(hwy_contrib PUBLIC cxx_std_11)
+target_link_libraries(hwy_contrib hwy)
 
 add_library(hwy_test STATIC ${HWY_TEST_SOURCES})
 target_compile_options(hwy_test PRIVATE ${HWY_FLAGS})
