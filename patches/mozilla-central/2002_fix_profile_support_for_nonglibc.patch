From: Duncan Overbruck <mozilla@duncano.de>

Profiler will fail to build on musl other non GLIBC toolchains

https://bugzilla.mozilla.org/show_bug.cgi?id=1358214

diff --git a/tools/profiler/core/platform.h b/tools/profiler/core/platform.h
--- a/tools/profiler/core/platform.h
+++ b/tools/profiler/core/platform.h
@@ -36,17 +36,17 @@
 #include "nsStringFwd.h"
 #include "nsTArray.h"
 
 #include <functional>
 #include <stdint.h>
 
 // We need a definition of gettid(), but old glibc versions don't provide a
 // wrapper for it.
-#if defined(__GLIBC__)
+#if defined(__linux__) || !defined(__BIONIC__)
 #  include <unistd.h>
 #  include <sys/syscall.h>
 #  define gettid() static_cast<pid_t>(syscall(SYS_gettid))
 #elif defined(GP_OS_darwin)
 #  include <unistd.h>
 #  include <sys/syscall.h>
 #  define gettid() static_cast<pid_t>(syscall(SYS_thread_selfid))
 #elif defined(GP_OS_android)
