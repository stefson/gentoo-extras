# HG changeset patch
# User Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date 1754557437 0
# Node ID 78b42a7127b67c31fbbd9af2b9b10100aacb80c1
# Parent  3bfe8b55ca4514f1e9a5ac46c262ef978889032c
Bug 1981375 - Prevent ambiguous name resolution in some build configurations. r=stransky

Depending on using namespace declarations and so on, GSettings could
refer to mozilla::widget::GSettings rather than what we want.

Differential Revision: https://phabricator.services.mozilla.com/D260244


diff --git a/widget/gtk/GRefPtr.h b/widget/gtk/GRefPtr.h
--- a/widget/gtk/GRefPtr.h
+++ b/widget/gtk/GRefPtr.h
@@ -48,17 +48,17 @@ GOBJECT_TRAITS(GdkPixbuf)
 GOBJECT_TRAITS(GCancellable)
 GOBJECT_TRAITS(GtkIMContext)
 GOBJECT_TRAITS(GUnixFDList)
 GOBJECT_TRAITS(GtkCssProvider)
 GOBJECT_TRAITS(GDBusMethodInvocation)
 GOBJECT_TRAITS(GdkWindow)
 GOBJECT_TRAITS(GtkIconInfo)
 GOBJECT_TRAITS(GIcon)
-GOBJECT_TRAITS(GSettings)
+GOBJECT_TRAITS(::GSettings)
 
 #undef GOBJECT_TRAITS
 
 template <>
 struct RefPtrTraits<GVariant> {
   static void AddRef(GVariant* aVariant) { g_variant_ref(aVariant); }
   static void Release(GVariant* aVariant) { g_variant_unref(aVariant); }
 };

