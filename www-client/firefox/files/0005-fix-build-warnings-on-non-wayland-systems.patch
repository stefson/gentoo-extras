# HG changeset patch
# User stransky <stransky@redhat.com>
# Date 1668500066 0
# Node ID d0cd9dcd954ef2f74bb1a191bb2c79403f13a017
# Parent  be4f28d07be5dd5951cc48a58378a42e78a10963
Bug 1793507 [FFVPX] Fix build warnings on non-Wayland systems r=alwu

Differential Revision: https://phabricator.services.mozilla.com/D161880

diff --git a/media/ffvpx/config_override.h b/media/ffvpx/config_override.h
--- a/media/ffvpx/config_override.h
+++ b/media/ffvpx/config_override.h
@@ -9,22 +9,23 @@
 
 // override '#define EXTERN_ASM _' in config_generic.h to allow building with
 // gcc on arm
 #if defined(__GNUC__) && defined(__arm__)
 #undef EXTERN_ASM
 #define EXTERN_ASM
 #endif
 
-#if defined(MOZ_WAYLAND) && !defined(MOZ_FFVPX_AUDIOONLY)
 #undef CONFIG_VAAPI
 #undef CONFIG_VAAPI_1
 #undef CONFIG_VP8_VAAPI_HWACCEL
 #undef CONFIG_VP9_VAAPI_HWACCEL
 #undef CONFIG_AV1_VAAPI_HWACCEL
+
+#if defined(MOZ_WAYLAND) && !defined(MOZ_FFVPX_AUDIOONLY)
 #define CONFIG_VAAPI 1
 #define CONFIG_VAAPI_1 1
 #define CONFIG_VP8_VAAPI_HWACCEL 1
 #define CONFIG_VP9_VAAPI_HWACCEL 1
 #define CONFIG_AV1_VAAPI_HWACCEL 1
 #else
 #define CONFIG_VAAPI 0
 #define CONFIG_VAAPI_1 0

